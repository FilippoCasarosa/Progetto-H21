{"ast":null,"code":"import { Prebuilt } from '../../shared/models/prebuilt.model';\nimport { DialogComponent } from 'src/app/shared/dialog/dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/services/prebuilt.service\";\nimport * as i2 from \"@angular/material/dialog\";\n\nfunction PrebuiltsListComponent_p_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"No Prebuilts available!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PrebuiltsListComponent_div_1_mat_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-card\", 4)(1, \"mat-card-header\");\n    i0.ɵɵelement(2, \"div\", 5);\n    i0.ɵɵelementStart(3, \"mat-card-title\", 6);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-card-subtitle\", 6);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"mat-card-content\");\n    i0.ɵɵelement(8, \"img\", 7);\n    i0.ɵɵelementStart(9, \"p\", 6);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"mat-card-actions\")(12, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function PrebuiltsListComponent_div_1_mat_card_2_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.onPrebuiltSelected();\n    });\n    i0.ɵɵelementStart(13, \"mat-icon\");\n    i0.ɵɵtext(14, \"favorite\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const prebuilt_r5 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", prebuilt_r5.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Prezzo: \", prebuilt_r5.totalPrice, \"$\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", prebuilt_r5.imagePath, i0.ɵɵsanitizeUrl)(\"alt\", prebuilt_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Utilizzo: \", prebuilt_r5.usage, \"\");\n  }\n}\n\nfunction PrebuiltsListComponent_div_1_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PrebuiltsListComponent_div_1_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"h1\");\n    i0.ɵɵtext(2, \"An Error Occured\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function PrebuiltsListComponent_div_1_div_4_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.onHandleError();\n    });\n    i0.ɵɵtext(6, \"Okay\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r4.error);\n  }\n}\n\nfunction PrebuiltsListComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 1);\n    i0.ɵɵtemplate(2, PrebuiltsListComponent_div_1_mat_card_2_Template, 15, 5, \"mat-card\", 2);\n    i0.ɵɵtemplate(3, PrebuiltsListComponent_div_1_p_3_Template, 2, 0, \"p\", 0);\n    i0.ɵɵtemplate(4, PrebuiltsListComponent_div_1_div_4_Template, 7, 1, \"div\", 3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.loadedPrebuilts);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isFetching && !ctx_r1.error);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.error);\n  }\n}\n/**\r\n * @author Filippo Casarosa\r\n */\n\n\nexport let PrebuiltsListComponent = /*#__PURE__*/(() => {\n  class PrebuiltsListComponent {\n    constructor(prebuiltService, dialog) {\n      this.prebuiltService = prebuiltService;\n      this.dialog = dialog;\n      this.loadedPrebuilts = [];\n      this.isFetching = false;\n      this.error = null;\n    }\n    /**\r\n     * All'avvio del componente prebuilts, vengono mostrati tutti i computer preassemblati\r\n     * tramite l'API definita del service di prebuilt\r\n     * @author Filippo Casarosa\r\n     */\n\n\n    ngOnInit() {\n      this.prebuilt = new Prebuilt();\n      this.errorSub = this.prebuiltService.error.subscribe(errorMessage => {\n        this.error = errorMessage;\n      });\n      this.isFetching = true;\n      this.prebuiltService.getPrebuilts().subscribe(prebuilts => {\n        this.isFetching = false;\n        this.loadedPrebuilts = prebuilts;\n      }, error => {\n        this.isFetching = false;\n        this.error = error.message;\n      });\n    }\n    /**\r\n     * Chiude l'observable che ha la funzione di mostrare l'errore\r\n     * @author Filippo Casarosa\r\n     */\n\n\n    ngOnDestroy() {\n      this.errorSub.unsubscribe;\n    }\n    /**\r\n     * Resetta l'errore a null\r\n     * @author Filippo Casarosa\r\n     */\n\n\n    onHandleError() {\n      this.error = null;\n    }\n\n    onDetail() {\n      this.prebuiltService.getPrebuilt(this.loadedPrebuilts[0].id).subscribe(prebuilt => {\n        this.prebuilt = prebuilt;\n      });\n      return this.prebuilt.componentList;\n    }\n    /**\r\n     * Quando viene selezionato il prebuilt, apre un dialog box per confermare la scelta\r\n     * @author Filippo Casarosa\r\n     */\n\n\n    onPrebuiltSelected() {\n      const dialogRef = this.dialog.open(DialogComponent, {\n        width: '330px' // data: {name: this.name, animal: this.animal}\n\n      });\n      console.log(this.prebuiltService.getPrebuilt(1));\n      dialogRef.afterClosed().subscribe(result => {\n        console.log('The dialog was closed');\n      });\n    }\n\n  }\n\n  PrebuiltsListComponent.ɵfac = function PrebuiltsListComponent_Factory(t) {\n    return new (t || PrebuiltsListComponent)(i0.ɵɵdirectiveInject(i1.PrebuiltService), i0.ɵɵdirectiveInject(i2.MatDialog));\n  };\n\n  PrebuiltsListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PrebuiltsListComponent,\n    selectors: [[\"app-prebuilts-list\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[4, \"ngIf\"], [\"fxLayout\", \"row wrap\", \"fxLayoutGap\", \"35px grid\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"card\"], [\"mat-card-avatar\", \"\", 1, \"header-image\"], [2, \"text-align\", \"center\"], [\"mat-card-image\", \"\", 1, \"image\", 2, \"display\", \"block\", \"margin-left\", \"auto\", \"margin-right\", \"auto\", 3, \"src\", \"alt\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", \"mat-fab\", \"\", 2, \"margin\", \"15px\", 3, \"click\"], [1, \"alert\", \"alert-danger\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n    template: function PrebuiltsListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, PrebuiltsListComponent_p_0_Template, 2, 0, \"p\", 0);\n        i0.ɵɵtemplate(1, PrebuiltsListComponent_div_1_Template, 5, 3, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.loadedPrebuilts.length < 1 && !ctx.isFetching);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loadedPrebuilts.length >= 1);\n      }\n    },\n    styles: [\".card[_ngcontent-%COMP%]{max-width:400px;margin:20px}.header-image[_ngcontent-%COMP%]{background-size:cover}.image[_ngcontent-%COMP%]{width:100px;height:100px}\"]\n  });\n  return PrebuiltsListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}